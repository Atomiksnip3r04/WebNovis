const nav=document.getElementById("nav");let lastScroll=0;window.addEventListener("scroll",()=>{const currentScroll=window.pageYOffset;if(currentScroll>100){nav.classList.add("scrolled")}else{nav.classList.remove("scrolled")}lastScroll=currentScroll});const navToggle=document.getElementById("navToggle");const navMenu=document.getElementById("navMenu");navToggle.addEventListener("click",()=>{const isExpanded=navMenu.classList.toggle("active");navToggle.classList.toggle("active");navToggle.setAttribute("aria-expanded",isExpanded)});const navLinks=document.querySelectorAll(".nav-link");navLinks.forEach(link=>{link.addEventListener("click",()=>{navMenu.classList.remove("active");navToggle.classList.remove("active")})});let lenis;if(typeof Lenis!=="undefined"){console.log("ðŸš€ Initializing Lenis Smooth Scroll");lenis=new Lenis({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),direction:"vertical",gestureDirection:"vertical",smooth:true,mouseMultiplier:1,smoothTouch:false,touchMultiplier:2});function raf(time){lenis.raf(time);requestAnimationFrame(raf)}requestAnimationFrame(raf);document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();const targetId=this.getAttribute("href");const target=document.querySelector(targetId);if(target){const navMenu=document.getElementById("navMenu");const navToggle=document.getElementById("navToggle");if(navMenu&&navMenu.classList.contains("active")){navMenu.classList.remove("active");navToggle.classList.remove("active")}lenis.scrollTo(target,{offset:-80,duration:1.5,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t))})}})})}else{document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();const target=document.querySelector(this.getAttribute("href"));if(target){const navMenu=document.getElementById("navMenu");const navToggle=document.getElementById("navToggle");if(navMenu&&navMenu.classList.contains("active")){navMenu.classList.remove("active");navToggle.classList.remove("active")}const offsetTop=target.offsetTop-80;window.scrollTo({top:offsetTop,behavior:"smooth"})}})})}const observerOptions={threshold:.1,rootMargin:"0px 0px -100px 0px"};const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.opacity="1";entry.target.style.transform="translateY(0)"}})},observerOptions);const animatedElements=document.querySelectorAll(".triade-card, .service-section, .cta-section");animatedElements.forEach(el=>{el.style.opacity="0";el.style.transform="translateY(30px)";el.style.transition="opacity 0.8s ease, transform 0.8s ease";observer.observe(el)});const triadeCards=document.querySelectorAll(".triade-card");triadeCards.forEach(card=>{card.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px) scale(1.02)"});card.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})});let mouseX=0;let mouseY=0;let cursorX=0;let cursorY=0;document.addEventListener("mousemove",e=>{mouseX=e.clientX;mouseY=e.clientY});const observerOptionsNav={root:null,rootMargin:"-50% 0px -50% 0px",threshold:0};const navObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const id=entry.target.getAttribute("id");if(id){navLinks.forEach(link=>{link.classList.remove("active");if(link.getAttribute("href")===`#${id}`){link.classList.add("active")}})}}})},observerOptionsNav);sections.forEach(section=>{navObserver.observe(section)});let ticking=false;window.addEventListener("scroll",()=>{if(!ticking){window.requestAnimationFrame(()=>{const scrolled=window.pageYOffset;if(scrolled>100){nav.classList.add("scrolled")}else{nav.classList.remove("scrolled")}const orbs=document.querySelectorAll(".gradient-orb");orbs.forEach((orb,index)=>{const speed=.5+index*.2;orb.style.transform=`translateY(${scrolled*speed}px)`});const floatingCards=document.querySelectorAll(".floating-card");floatingCards.forEach((card,index)=>{const speed=.2+index*.1;card.style.transform=`translateY(${scrolled*speed}px)`});const backToTop=document.getElementById("backToTop");if(backToTop){if(scrolled>500){backToTop.classList.add("visible")}else{backToTop.classList.remove("visible")}}const progressBar=document.querySelector(".scroll-progress");if(progressBar){const windowHeight=document.documentElement.scrollHeight-document.documentElement.clientHeight;const progress=scrolled/windowHeight*100;progressBar.style.width=progress+"%"}ticking=false});ticking=true}});window.addEventListener("load",()=>{document.body.style.opacity="0";setTimeout(()=>{document.body.style.transition="opacity 0.5s ease";document.body.style.opacity="1"},100)});function debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}}const canvas=document.getElementById("particlesCanvas");if(canvas){const ctx=canvas.getContext("2d");function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight}resizeCanvas();window.addEventListener("resize",resizeCanvas);class Particle{constructor(){this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height;this.size=Math.random()*2+.5;this.speedX=Math.random()*.5-.25;this.speedY=Math.random()*.5-.25;this.opacity=Math.random()*.5+.2}update(){this.x+=this.speedX;this.y+=this.speedY;if(this.x>canvas.width)this.x=0;if(this.x<0)this.x=canvas.width;if(this.y>canvas.height)this.y=0;if(this.y<0)this.y=canvas.height}draw(){ctx.fillStyle=`rgba(184, 134, 11, ${this.opacity})`;ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fill()}}const particles=[];for(let i=0;i<100;i++){particles.push(new Particle)}function animateParticles(){ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(particle=>{particle.update();particle.draw()});for(let i=0;i<particles.length;i++){for(let j=i+1;j<particles.length;j++){const dx=particles[i].x-particles[j].x;const dy=particles[i].y-particles[j].y;const distance=Math.sqrt(dx*dx+dy*dy);if(distance<100){ctx.strokeStyle=`rgba(184, 134, 11, ${.2*(1-distance/100)})`;ctx.lineWidth=.5;ctx.beginPath();ctx.moveTo(particles[i].x,particles[i].y);ctx.lineTo(particles[j].x,particles[j].y);ctx.stroke()}}}requestAnimationFrame(animateParticles)}animateParticles()}const magneticElements=document.querySelectorAll(".magnetic");magneticElements.forEach(element=>{element.addEventListener("mousemove",e=>{const rect=element.getBoundingClientRect();const x=e.clientX-rect.left-rect.width/2;const y=e.clientY-rect.top-rect.height/2;const moveX=x*.15;const moveY=y*.15;element.style.transform=`translate(${moveX}px, ${moveY}px) scale(1.05)`});element.addEventListener("mouseleave",()=>{element.style.transform="translate(0, 0) scale(1)"})});const visualCards=document.querySelectorAll(".floating-3d");visualCards.forEach(card=>{card.addEventListener("mousemove",e=>{const rect=card.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;const centerX=rect.width/2;const centerY=rect.height/2;const rotateX=(y-centerY)/10;const rotateY=(centerX-x)/10;card.style.transform=`perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(20px)`});card.addEventListener("mouseleave",()=>{card.style.transform="perspective(1000px) rotateX(0) rotateY(0) translateZ(0)"})});const revealElements=document.querySelectorAll(".triade-card, .service-section, .stat-item");const revealObserver=new IntersectionObserver(entries=>{entries.forEach((entry,index)=>{if(entry.isIntersecting){setTimeout(()=>{entry.target.style.opacity="1";entry.target.style.transform="translateY(0) scale(1)"},index*100)}})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});revealElements.forEach(el=>{el.style.opacity="0";el.style.transform="translateY(50px) scale(0.95)";el.style.transition="opacity 0.8s cubic-bezier(0.23, 1, 0.32, 1), transform 0.8s cubic-bezier(0.23, 1, 0.32, 1)";revealObserver.observe(el)});document.addEventListener("click",e=>{const ripple=document.createElement("div");ripple.style.cssText=`\n        position: fixed;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: radial-gradient(circle, rgba(184, 134, 11, 0.6) 0%, rgba(139, 21, 56, 0.3) 50%, transparent 70%);\n        pointer-events: none;\n        z-index: 9999;\n        left: ${e.clientX}px;\n        top: ${e.clientY}px;\n        transform: translate(-50%, -50%) scale(0);\n        animation: rippleEffect 0.6s ease-out forwards;\n    `;document.body.appendChild(ripple);setTimeout(()=>ripple.remove(),600)});const style=document.createElement("style");style.textContent=`\n    @keyframes rippleEffect {\n        to {\n            transform: translate(-50%, -50%) scale(20);\n            opacity: 0;\n        }\n    }\n`;document.head.appendChild(style);const codeLines=document.querySelectorAll(".code-line");const codeObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.animation="typing 2s steps(30) forwards, blink 0.75s step-end infinite"}})},{threshold:.5});codeLines.forEach(line=>{codeObserver.observe(line)});let fps=0;let lastTime=performance.now();function measureFPS(){const currentTime=performance.now();fps=Math.round(1e3/(currentTime-lastTime));lastTime=currentTime;requestAnimationFrame(measureFPS)}if("IntersectionObserver"in window){const imageObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.classList.add("loaded");imageObserver.unobserve(img)}})});document.querySelectorAll("img[data-src]").forEach(img=>{imageObserver.observe(img)})}let konamiCode=[];const konamiSequence=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];document.addEventListener("keydown",e=>{konamiCode.push(e.key);konamiCode=konamiCode.slice(-10);if(konamiCode.join("")===konamiSequence.join("")){document.body.style.animation="rainbowBackground 2s ease infinite";setTimeout(()=>{document.body.style.animation=""},5e3)}});const rainbowStyle=document.createElement("style");rainbowStyle.textContent=`\n    @keyframes rainbowBackground {\n        0% { filter: hue-rotate(0deg); }\n        100% { filter: hue-rotate(360deg); }\n    }\n`;document.head.appendChild(rainbowStyle);console.log("%cðŸš€ WebNovis - Powered by Innovation","font-size: 20px; font-weight: bold; background: linear-gradient(135deg, #6366f1, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent;");console.log("%cCreated with â¤ï¸ and cutting-edge technology","font-size: 12px; color: #64748b;");const numberItems=document.querySelectorAll(".number-item");const animateCounter=element=>{const target=parseInt(element.dataset.count);const valueElement=element.querySelector(".number-value");const duration=2e3;const increment=target/(duration/16);let current=0;const updateCounter=()=>{current+=increment;if(current<target){valueElement.textContent=Math.floor(current);requestAnimationFrame(updateCounter)}else{valueElement.textContent=target}};updateCounter()};const numberObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){animateCounter(entry.target);numberObserver.unobserve(entry.target)}})},{threshold:.5});numberItems.forEach(item=>numberObserver.observe(item));const backToTop=document.getElementById("backToTop");backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const createScrollProgress=()=>{const progressBar=document.createElement("div");progressBar.className="scroll-progress";document.body.appendChild(progressBar)};createScrollProgress();const testimonialCards=document.querySelectorAll(".testimonial-card");let currentTestimonial=0;const rotateTestimonials=()=>{testimonialCards.forEach((card,index)=>{card.style.transform=index===currentTestimonial?"scale(1.05) translateY(-10px)":"scale(1) translateY(0)";card.style.opacity=index===currentTestimonial?"1":"0.7"});currentTestimonial=(currentTestimonial+1)%testimonialCards.length};if(testimonialCards.length>0){setInterval(rotateTestimonials,5e3)}document.addEventListener("mousemove",e=>{const mouseX=e.clientX/window.innerWidth;const mouseY=e.clientY/window.innerHeight;const floatingCards=document.querySelectorAll(".floating-card");floatingCards.forEach((card,index)=>{const speed=(index+1)*10;const x=(mouseX-.5)*speed;const y=(mouseY-.5)*speed;card.style.transform=`translate(${x}px, ${y}px)`});const orbs=document.querySelectorAll(".gradient-orb");orbs.forEach((orb,index)=>{const speed=(index+1)*20;const x=(mouseX-.5)*speed;const y=(mouseY-.5)*speed;orb.style.transform=`translate(${x}px, ${y}px)`})});const revealSections=document.querySelectorAll(".service-section, .testimonials-section, .tech-stack-section");const sectionObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.animation="fadeInUp 1s ease forwards"}})},{threshold:.2});revealSections.forEach(section=>sectionObserver.observe(section));const socialFeedScroll=document.getElementById("socialFeedScroll");if(socialFeedScroll){console.log("ðŸ”„ Initializing seamless infinite scroll...");setTimeout(()=>{const posts=Array.from(socialFeedScroll.children);console.log(`ðŸ“ Found ${posts.length} posts, cloning for infinite scroll...`);const clonedPosts=posts.map(post=>post.cloneNode(true));clonedPosts.forEach(clone=>{socialFeedScroll.appendChild(clone)});let scrollPosition=0;let isScrolling=true;let scrollSpeed=.5;let originalHeight=0;posts.forEach(post=>{originalHeight+=post.offsetHeight;const style=window.getComputedStyle(post);originalHeight+=parseInt(style.marginBottom)||0});console.log(`ðŸ“ Original height: ${originalHeight}px`);console.log(`ðŸ“ Total height: ${socialFeedScroll.scrollHeight}px`);function autoScroll(){if(isScrolling){scrollPosition+=scrollSpeed;if(scrollPosition>=originalHeight){scrollPosition=0;console.log("ðŸ” Loop reset")}socialFeedScroll.scrollTop=scrollPosition}requestAnimationFrame(autoScroll)}autoScroll();console.log("âœ… Infinite scroll started!");socialFeedScroll.addEventListener("mouseenter",()=>{isScrolling=false;console.log("â¸ï¸ Scroll paused")});socialFeedScroll.addEventListener("mouseleave",()=>{isScrolling=true;console.log("â–¶ï¸ Scroll resumed")});socialFeedScroll.addEventListener("touchstart",()=>{isScrolling=false;console.log("ðŸ“± Touch start - Scroll paused")},{passive:true});socialFeedScroll.addEventListener("touchend",()=>{setTimeout(()=>{isScrolling=true;scrollPosition=socialFeedScroll.scrollTop;console.log("ðŸ“± Touch end - Scroll resumed")},2e3)},{passive:true})},100);const feedStats=document.querySelectorAll(".feed-stats span");feedStats.forEach((stat,index)=>{setInterval(()=>{const currentText=stat.textContent;const match=currentText.match(/[\d.]+K?/);if(match){let value=parseFloat(match[0].replace("K",""));const isK=match[0].includes("K");if(isK){value+=.1;stat.textContent=stat.textContent.replace(/[\d.]+K/,value.toFixed(1)+"K")}else{value+=Math.floor(Math.random()*3)+1;stat.textContent=stat.textContent.replace(/\d+/,value)}}},3e3+index*1e3)});feedStats.forEach(stat=>{stat.addEventListener("click",()=>{stat.style.transform="scale(1.1)";setTimeout(()=>{stat.style.transform="scale(1)"},200)})})}const techItems=document.querySelectorAll(".tech-item");techItems.forEach(item=>{item.addEventListener("mouseenter",function(){const icon=this.querySelector(".tech-icon");icon.style.transform="scale(1.3) rotate(360deg)";icon.style.transition="transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)"});item.addEventListener("mouseleave",function(){const icon=this.querySelector(".tech-icon");icon.style.transform="scale(1) rotate(0deg)"})});const contactForm=document.querySelector(".contact-form");if(contactForm){const inputs=contactForm.querySelectorAll("input, textarea");inputs.forEach(input=>{input.addEventListener("focus",function(){this.parentElement.style.transform="scale(1.02)";this.parentElement.style.transition="transform 0.3s ease"});input.addEventListener("blur",function(){this.parentElement.style.transform="scale(1)";if(this.value.trim()!==""){this.style.borderColor="rgba(20, 184, 166, 0.5)"}else if(this.hasAttribute("required")){this.style.borderColor="rgba(239, 68, 68, 0.5)"}});input.addEventListener("input",function(){if(this.value.trim()!==""){this.style.borderColor="rgba(184, 134, 11, 0.5)"}})});contactForm.addEventListener("submit",e=>{e.preventDefault();const nameInput=contactForm.querySelector('input[placeholder="Nome"]');const emailInput=contactForm.querySelector('input[placeholder="Email"]');const companyInput=contactForm.querySelector('input[placeholder="Azienda"]');const messageInput=contactForm.querySelector("textarea");const name=nameInput?nameInput.value:"";const email=emailInput?emailInput.value:"";const company=companyInput?companyInput.value:"";const message=messageInput?messageInput.value:"";const subject=`Nuovo Contatto dal Sito: ${name}`;const body=`Nome: ${name}%0D%0AEmail: ${email}%0D%0AAzienda: ${company}%0D%0A%0D%0AMessaggio:%0D%0A${message}`;window.location.href=`mailto:webnovis.info@gmail.com?subject=${encodeURIComponent(subject)}&body=${body}`;const button=contactForm.querySelector('button[type="submit"]');button.innerHTML="<span>âœ“ Inviato!</span>";button.style.background="linear-gradient(135deg, #14b8a6, #10b981)";setTimeout(()=>{button.innerHTML="<span>Invia Messaggio</span>";button.style.background="";contactForm.reset()},3e3)})}document.addEventListener("keydown",e=>{if(e.key==="h"||e.key==="H"){window.scrollTo({top:0,behavior:"smooth"})}if(e.key==="c"||e.key==="C"){const contactSection=document.getElementById("contatti");if(contactSection){contactSection.scrollIntoView({behavior:"smooth"})}}});const bodySections=document.querySelectorAll("section");const body=document.body;const colorObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const sectionClass=entry.target.className;if(sectionClass.includes("hero")){body.style.background="var(--dark)"}else if(sectionClass.includes("triade")){body.style.background="linear-gradient(180deg, var(--dark) 0%, var(--dark-light) 100%)"}}})},{threshold:.5});bodySections.forEach(section=>colorObserver.observe(section));const createTypingEffect=(element,text,speed=100)=>{let i=0;element.textContent="";const type=()=>{if(i<text.length){element.textContent+=text.charAt(i);i++;setTimeout(type,speed)}};type()};const buttons=document.querySelectorAll(".btn");buttons.forEach(button=>{button.addEventListener("mousemove",e=>{const rect=button.getBoundingClientRect();const x=e.clientX-rect.left-rect.width/2;const y=e.clientY-rect.top-rect.height/2;button.style.transform=`translate(${x*.2}px, ${y*.2}px)`});button.addEventListener("mouseleave",()=>{button.style.transform="translate(0, 0)"})});const staggerElements=document.querySelectorAll(".service-features li");const staggerObserver=new IntersectionObserver(entries=>{entries.forEach((entry,index)=>{if(entry.isIntersecting){setTimeout(()=>{entry.target.style.opacity="1";entry.target.style.transform="translateX(0)"},index*100)}})},{threshold:.5});staggerElements.forEach(el=>{el.style.opacity="0";el.style.transform="translateX(-30px)";el.style.transition="all 0.6s cubic-bezier(0.23, 1, 0.32, 1)";staggerObserver.observe(el)});const codeToType=`import React from 'react';\nimport { Performance, SEO } from '@webnovis/core';\n\nfunction WebNovis() {\n  return (\n    <div className="website">\n      <Performance level="ultra" />\n      <SEO optimized={true} />\n      <header className="hero">\n        <h1>Il Tuo Brand</h1>\n      </header>\n    </div>\n  );\n}`;let codeIndex=0;let lineNumber=1;let isTyping=false;const typeCode=()=>{const codeContent=document.getElementById("codeContent");const typingArea=codeContent?.querySelector(".code-typing-area");const cursor=codeContent?.querySelector(".code-cursor");if(!typingArea||isTyping)return;isTyping=true;const typeCharacter=()=>{if(codeIndex<codeToType.length){const char=codeToType[codeIndex];const currentText=typingArea.innerHTML;if(char==="\n"){typingArea.innerHTML=currentText+"\n";lineNumber++}else{const coloredChar=colorSyntax(char,codeToType.substring(0,codeIndex));typingArea.innerHTML=currentText+coloredChar}codeIndex++;const speed=char==="\n"?100:Math.random()*50+30;if(codeContent){codeContent.scrollTop=codeContent.scrollHeight}setTimeout(typeCharacter,speed)}else{setTimeout(()=>{if(cursor)cursor.style.display="none"},1e3);setTimeout(()=>{codeIndex=0;lineNumber=1;typingArea.innerHTML="";if(cursor)cursor.style.display="inline-block";isTyping=false;setTimeout(()=>typeCharacter(),100)},2e3)}};typeCharacter()};const colorSyntax=(char,previousText)=>{const lastWord=previousText.split(/[\s\n(){}<>[\];,.]/).pop()+char;const keywords=["import","from","function","return","const","let","var","export","default","className","key"];const components=["React","Performance","SEO","Design","ServiceCard"];const values=["true","false","null","undefined"];if(keywords.some(kw=>lastWord.includes(kw))){return`<span style="color: #ec4899">${char}</span>`}else if(components.some(comp=>lastWord.includes(comp))){return`<span style="color: #14b8a6">${char}</span>`}else if(values.some(val=>lastWord.includes(val))){return`<span style="color: #f59e0b">${char}</span>`}else if(char==='"'||char==="'"||char==="`"){return`<span style="color: #10b981">${char}</span>`}else if(char==="{"||char==="}"||char==="("||char===")"||char==="["||char==="]"){return`<span style="color: #818cf8">${char}</span>`}else if(char==="/"&&previousText.slice(-1)==="/"){return`<span style="color: #64748b">${char}</span>`}return char};const codeWindowObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting&&!isTyping){setTimeout(()=>{typeCode()},500);codeWindowObserver.unobserve(entry.target)}})},{threshold:.3});const codeWindow=document.getElementById("codeContent");if(codeWindow){codeWindowObserver.observe(codeWindow)}let lastFrameTime=performance.now();let currentFps=60;const monitorPerformance=()=>{const currentTime=performance.now();const delta=currentTime-lastFrameTime;currentFps=Math.round(1e3/delta);lastFrameTime=currentTime;if(currentFps<30){console.warn("Low FPS detected:",currentFps)}requestAnimationFrame(monitorPerformance)};const preloadResources=()=>{const criticalImages=document.querySelectorAll("img[data-critical]");criticalImages.forEach(img=>{const link=document.createElement("link");link.rel="preload";link.as="image";link.href=img.src;document.head.appendChild(link)})};preloadResources();if("serviceWorker"in navigator){window.addEventListener("load",()=>{})}const trackEvent=(category,action,label)=>{console.log("Event:",category,action,label)};buttons.forEach(button=>{button.addEventListener("click",()=>{trackEvent("Button","Click",button.textContent.trim())})});const trackSectionView=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){trackEvent("Section","View",entry.target.id||entry.target.className)}})},{threshold:.5});sections.forEach(section=>trackSectionView.observe(section));console.log("%câœ¨ WebNovis - Il Miglior Sito Mai Creato âœ¨","font-size: 24px; font-weight: bold; background: linear-gradient(135deg, #6366f1, #ec4899, #14b8a6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; padding: 20px;");console.log("%cðŸš€ Performance Optimized | ðŸŽ¨ Stunning Design | ðŸ’Ž Premium Interactions","font-size: 14px; color: #64748b; font-style: italic;");console.log("%cKeyboard Shortcuts: H = Home | C = Contact","font-size: 12px; color: #6366f1;");function initChat(){const chatButton=document.getElementById("chatButton");const chatPopup=document.getElementById("chatPopup");const chatClose=document.getElementById("chatClose");const chatInput=document.getElementById("chatInput");const chatSend=document.getElementById("chatSend");const chatMessages=document.getElementById("chatMessages");const fabNotification=document.querySelector(".fab-notification");console.log("ðŸ” Chat elements check:",{chatButton:chatButton?"âœ… Found":"âŒ Not found",chatPopup:chatPopup?"âœ… Found":"âŒ Not found",chatClose:chatClose?"âœ… Found":"âŒ Not found",chatInput:chatInput?"âœ… Found":"âŒ Not found",chatSend:chatSend?"âœ… Found":"âŒ Not found",chatMessages:chatMessages?"âœ… Found":"âŒ Not found"});if(chatButton){chatButton.style.outline="2px solid red";console.log("ðŸŽ¯ FAB button position:",chatButton.getBoundingClientRect());chatButton.onclick=function(e){e.preventDefault();e.stopPropagation();const isActive=chatPopup.classList.contains("active");console.log("ðŸ–±ï¸ Chat button clicked! Current state:",isActive?"open":"closed");chatPopup.classList.toggle("active");console.log("ðŸ“± New state:",chatPopup.classList.contains("active")?"open":"closed");if(chatPopup.classList.contains("active")&&fabNotification){fabNotification.style.display="none"}if(chatPopup.classList.contains("active")&&chatInput){setTimeout(()=>chatInput.focus(),300)}};console.log("âœ… Chat onclick handler attached")}else{console.error("âŒ Chat button not found!")}if(!chatPopup){console.error("âŒ Chat popup not found!");return}if(chatClose){chatClose.addEventListener("click",()=>{chatPopup.classList.remove("active")})}const sendMessage=()=>{const message=chatInput.value.trim();if(message==="")return;addUserMessage(message);chatInput.value="";showTypingIndicator();setTimeout(()=>{hideTypingIndicator();addBotResponse(message)},1e3+Math.random()*1e3)};if(chatSend){chatSend.addEventListener("click",sendMessage)}if(chatInput){chatInput.addEventListener("keypress",e=>{if(e.key==="Enter"){e.preventDefault();e.stopPropagation();sendMessage()}});chatInput.addEventListener("keydown",e=>{e.stopPropagation()});chatInput.addEventListener("input",e=>{e.stopPropagation()})}const quickReplyButtons=document.querySelectorAll(".quick-reply");quickReplyButtons.forEach(button=>{button.addEventListener("click",()=>{const message=button.dataset.message;chatInput.value=message;sendMessage();const quickRepliesContainer=document.querySelector(".chat-quick-replies");if(quickRepliesContainer){quickRepliesContainer.style.opacity="0";setTimeout(()=>quickRepliesContainer.remove(),300)}})});const addUserMessage=message=>{const messageDiv=document.createElement("div");messageDiv.className="chat-message user-message";messageDiv.innerHTML=`\n        <div class="message-avatar">TU</div>\n        <div class="message-content">\n            <p>${escapeHtml(message)}</p>\n            <span class="message-time">Ora</span>\n        </div>\n    `;chatMessages.appendChild(messageDiv);scrollToBottom()};const addBotResponse=userMessage=>{const response=getBotResponse(userMessage);const messageDiv=document.createElement("div");messageDiv.className="chat-message bot-message";messageDiv.innerHTML=`\n        <div class="message-avatar">WN</div>\n        <div class="message-content">\n            <p>${response}</p>\n            <span class="message-time">Ora</span>\n        </div>\n    `;chatMessages.appendChild(messageDiv);scrollToBottom()};const showTypingIndicator=()=>{const typingDiv=document.createElement("div");typingDiv.className="chat-message bot-message typing-indicator";typingDiv.id="typingIndicator";typingDiv.innerHTML=`\n        <div class="message-avatar">WN</div>\n        <div class="message-content">\n            <div class="typing-dot"></div>\n            <div class="typing-dot"></div>\n            <div class="typing-dot"></div>\n        </div>\n    `;chatMessages.appendChild(typingDiv);scrollToBottom()};const hideTypingIndicator=()=>{const typingIndicator=document.getElementById("typingIndicator");if(typingIndicator){typingIndicator.remove()}};const scrollToBottom=()=>{if(chatMessages){requestAnimationFrame(()=>{chatMessages.scrollTop=chatMessages.scrollHeight})}};const getBotResponse=message=>{const lowerMessage=message.toLowerCase();if(lowerMessage.includes("servizi")||lowerMessage.includes("info")){return"Offriamo tre servizi principali: ðŸŒ Web Development, ðŸŽ¨ Graphic Design e ðŸ“± Social Media Management. Quale ti interessa di piÃ¹?"}else if(lowerMessage.includes("preventivo")||lowerMessage.includes("prezzo")||lowerMessage.includes("costo")){return"Perfetto! Per un preventivo personalizzato, ti invito a compilare il form di contatto o chiamarci direttamente. Ogni progetto Ã¨ unico e vogliamo offrirti la soluzione migliore! ðŸ’¼"}else if(lowerMessage.includes("supporto")||lowerMessage.includes("aiuto")||lowerMessage.includes("problema")){return"Siamo qui per aiutarti! ðŸ†˜ Puoi contattarci via email a webnovis.info@gmail.com o chiamarci. Il nostro team Ã¨ sempre disponibile!"}else if(lowerMessage.includes("web")||lowerMessage.includes("sito")){return"Il nostro servizio Web Development include: siti responsive, e-commerce, ottimizzazione SEO e performance ultra-veloci. Vuoi saperne di piÃ¹? ðŸš€"}else if(lowerMessage.includes("design")||lowerMessage.includes("grafica")||lowerMessage.includes("logo")){return"Creiamo identitÃ  visive complete: logo, branding, materiale pubblicitario e molto altro. Il design Ã¨ la nostra passione! âœ¨"}else if(lowerMessage.includes("social")||lowerMessage.includes("instagram")||lowerMessage.includes("facebook")){return"Gestiamo i tuoi social media con strategie mirate, contenuti di qualitÃ  e campagne pubblicitarie ottimizzate. Facciamo crescere il tuo brand! ðŸ“±"}else if(lowerMessage.includes("contatto")||lowerMessage.includes("email")||lowerMessage.includes("telefono")){return"Puoi contattarci via email a webnovis.info@gmail.com o compilare il form nella sezione contatti. Rispondiamo sempre entro 24 ore! ðŸ“§"}else if(lowerMessage.includes("ciao")||lowerMessage.includes("salve")||lowerMessage.includes("buongiorno")){return"Ciao! ðŸ‘‹ Benvenuto su WebNovis. Come posso aiutarti oggi?"}else if(lowerMessage.includes("grazie")){return"Prego! Ãˆ stato un piacere aiutarti. Se hai altre domande, sono qui! ðŸ˜Š"}else{return"Interessante! Per informazioni piÃ¹ dettagliate, ti consiglio di contattarci direttamente. Il nostro team sarÃ  felice di rispondere a tutte le tue domande! ðŸ’¬"}};const escapeHtml=text=>{const div=document.createElement("div");div.textContent=text;return div.innerHTML};document.addEventListener("click",e=>{if(chatPopup&&chatPopup.classList.contains("active")){if(!e.target.closest(".chat-popup")&&!e.target.closest("#chatButton")&&!e.target.closest(".fab-container")){chatPopup.classList.remove("active")}}});setTimeout(()=>{if(fabNotification&&!chatPopup.classList.contains("active")){fabNotification.style.display="flex"}},5e3);console.log("%cðŸ’¬ Chat System Loaded","color: #10b981; font-weight: bold;")}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initChat)}else{initChat()}